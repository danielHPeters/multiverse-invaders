!function(t){var i={};function e(s){if(i[s])return i[s].exports;var o=i[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=21)}([function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});class s{constructor(t,i){this.x=t,this.y=i}static addVector(t,i){return new s(t.x+i.x,t.y+i.y)}static subtractVector(t,i){return new s(t.x-i.x,t.y-i.y)}static multiply(t,i){return new s(t.x*i,t.y*i)}static divide(t,i){if(0===i)throw new Error('cannot divide vector by scalar with value "0"');return new s(t.x/i,t.y/i)}set x(t){this._x=t}set y(t){this._y=t}get x(){return this._x}get y(){return this._y}set(t,i){this.x=t,this.y=i}setVector(t){this.x=t.x,this.y=t.y}add(t,i){this.x+=t,this.y+=i}addVector(t){this.x+=t.x,this.y+=t.y}subtract(t,i){this.x-=t,this.y-=i}subtractVector(t){this.x-=t.x,this.y-=t.y}multiply(t){this.x*=t,this.y*=t}divide(t){if(0===t)throw new Error('cannot divide vector by "0"');this.x/=t,this.y/=t}mag(){return Math.sqrt(this.x*this.x+this.y*this.y)}negative(){return new s(-this.x,-this.y)}normalize(){let t=this.mag();0!==t&&this.divide(t)}limit(t){Math.floor(this.mag())>t&&(this.normalize(),this.multiply(t))}distanceTo(t){return Math.sqrt(Math.pow(t.x-this.x,2)+Math.pow(t.y-this.y,2))}dot(t){return this.x*t.x+this.y*t.y}floor(){this.x=Math.floor(this.x),this.x=Math.floor(this.x)}clone(){return new s(this.x,this.y)}}i.Vector2=s},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});(s=i.EntityType||(i.EntityType={})).PLAYER="ship",s.ENEMY="enmey",s.ENEMY_BULLET="bulletEnemy",s.PLAYER_BULLET="bullet",s.BACKGROUND="background",s.MAP="map",s.GAME_OVER="gameOver",s.LASER="laser",s.MAIN_THEME="shockWave",s.EXPLOSION_I="explosion1",s.EXPLOSION_II="explosion2",s.BOX="BOX";var s},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const s=e(8);(o=i.Actions||(i.Actions={})).UP="UP",o.DOWN="DOWN",o.LEFT="LEFT",o.RIGHT="RIGHT",o.SHOOT="SHOOT",o.RESTART="RESTART";var o;i.InputManager=class extends s.Observable{constructor(t){super(),this.inputMap=t.keyBoard,this.init(),this.initializeTouchHandler(),this.touches={start:[],move:[]}}init(){window.addEventListener("keydown",t=>{let i=" "!==t.key?t.key:"space";this.state[this.inputMap[i]]=!0,this.notify()}),window.addEventListener("keyup",t=>{let i=" "!==t.key?t.key:"space";this.state[this.inputMap[i]]=!1,this.notify()})}initializeTouchHandler(){let t=document.getElementById("move"),i=t||window;i.addEventListener("touchstart",l,!1),i.addEventListener("touchmove",c,!1),i.addEventListener("touchend",d,!1),i.addEventListener("contextmenu",t=>(t.preventDefault(),!1));let e=[],s=[],o=0,h=0,n=0,a=0,r=this;function l(t){t.preventDefault(),e=t.touches,o=t.touches[0].pageX,h=t.touches[0].pageY}function c(t){r.reset(),t.preventDefault(),s=t.changedTouches,n=t.touches[0].pageX,a=t.touches[0].pageY;for(let i=0;i<t.touches.length;i++)s[i].pageX<e[i].pageX&&(r.state[r.inputMap.a]=!0),s[i].pageX>e[i].pageX&&(r.state[r.inputMap.d]=!0),s[i].pageY<e[i].pageY&&(r.state[r.inputMap.w]=!0),s[i].pageY>e[i].pageY&&(r.state[r.inputMap.s]=!0),r.notify()}function d(t){t.preventDefault(),r.reset()}}shoot(){this.state[this.inputMap.space]=!0}cancelShoot(){this.state[this.inputMap.space]=!1}reset(){this.state[this.inputMap.w]=!1,this.state[this.inputMap.a]=!1,this.state[this.inputMap.s]=!1,this.state[this.inputMap.d]=!1}}},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const s=e(5),o=e(6),h=e(7);var n;(a=n=i.AssetType||(i.AssetType={})).SPRITE="SPRITE",a.SPRITE_SHEET="SPRITE_SHEET",a.AUDIO="AUDIO",a.AUDIO_LOOP="LOOP";var a;i.AssetManager=class{constructor(){this.cache={sprites:{},spriteSheets:{},audio:{}},this.downloadCount=0,this.queue=[],this.initAudioContext()}initAudioContext(){try{window.AudioContext=window.AudioContext||webkitAudioContext,this.audioContext=new AudioContext,this.masterGain=this.audioContext.createGain(),this.effectsGain=this.audioContext.createGain(),this.ambientGain=this.audioContext.createGain(),this.masterGain.gain.value=1,this.masterGain.connect(this.audioContext.destination),this.effectsGain.connect(this.masterGain),this.ambientGain.connect(this.masterGain),this.ambientGain.gain.value=1,this.effectsGain.gain.value=1}catch(t){console.log("Web Audio API is not supported in this browser")}}adjustMasterVolume(t){this.masterGain.gain.value=t}adjustAmbientVolume(t){this.ambientGain.gain.value=t}adjustEffectsVolume(t){this.effectsGain.gain.value=t}done(){return this.downloadCount===this.queue.length}queueDownload(t,i,e,s=null){this.queue.push({id:t,path:i,type:e,opts:s})}loadAudioFromUrl(t,i){h.Ajax.create({method:"GET",url:t.path,responseType:"arraybuffer"},e=>{this.decodeAudio(e,t.id,i)})}decodeAudio(t,i,e){this.audioContext.decodeAudioData(t).then(t=>{this.cache.audio[i]=t,this.downloadCount+=1,this.done()&&e()},t=>{console.log("Error with decoding audio data"+t)})}loadSprite(t,i){let e=new Image;e.addEventListener("load",()=>{this.downloadCount++,this.done()&&i()}),e.src=t.path,this.cache.sprites[t.id]=e}loadSpriteSheet(t,i){let e=new Image;e.addEventListener("load",()=>{this.cache.spriteSheets[t.id]=new s.SpriteSheet(e,t.opts.frameWidth||0,t.opts.frameHeight||0),this.downloadCount+=1,this.done()&&i()}),e.src=t.path}downloadAll(t){this.queue.forEach(i=>{i.type===n.AUDIO?this.loadAudioFromUrl(i,t):i.type===n.SPRITE?this.loadSprite(i,t):i.type===n.SPRITE_SHEET&&this.loadSpriteSheet(i,t)})}getSound(t,i){let e;return e=i===n.AUDIO?this.effectsGain:this.ambientGain,new o.Sound(this.audioContext,e,this.cache.audio[t])}getSprite(t){return this.cache.sprites[t]}getSpriteSheet(t){return this.cache.spriteSheets[t]}}},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const s=e(0),o=e(1);i.HitBox=class{constructor(t,i,e,h){this.position=new s.Vector2(t,i),this.width=e,this.height=h,this.colliding=!1,this.collidesWith=[],this.type=o.EntityType.BOX,this.collidesWith.push(o.EntityType.PLAYER)}isCollideAbleWith(t){return this.collidesWith.includes(t.type.toString())}}},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.SpriteSheet=class{constructor(t,i,e){this._image=t,this._frameWidth=i,this._frameHeight=e,this._framesPerRow=Math.floor(this._image.width/this._frameWidth)}get image(){return this._image}set image(t){if(!(t instanceof Image))throw new Error("Param tileSetImage must be of type Image!");this._image=t}get frameWidth(){return this._frameWidth}set frameWidth(t){this._frameWidth=t}get frameHeight(){return this._frameHeight}set frameHeight(t){this._frameHeight=t}get framesPerRow(){return this._framesPerRow}set framesPerRow(t){this._framesPerRow=t}}},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.Sound=class{constructor(t,i,e){this.audioContext=t,this.masterGain=i,this.buffer=e,this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=.2,this.gainNode.connect(this.masterGain),this.playing=!1}play(t=!1){this.source=this.audioContext.createBufferSource(),this.source.buffer=this.buffer,this.source.loop=t,this.source.connect(this.gainNode),this.source.start(0)}stop(){this.source.stop(0)}}},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});class s{static create(t,i){let e=new XMLHttpRequest;e.addEventListener("load",()=>{i(e.response)}),e.open(t.method?t.method:s.defaults.method,t.url?t.url:s.defaults.url,t.async?t.async:s.defaults.async),t.hasOwnProperty("contentType")&&e.setRequestHeader("Content-Type",t.contentType?t.contentType:s.defaults.contentType),t.hasOwnProperty("responseType")&&(e.responseType=t.responseType),t.hasOwnProperty("data")&&"object"==typeof t.data&&(t.data=JSON.stringify(t.data)),e.send(t.data?t.data:null)}}s.defaults={url:"",method:"GET",contentType:"text/html",async:!0,data:null},i.Ajax=s},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.Observable=class{constructor(){this._observers=[],this._state={}}register(t){this._observers.push(t)}unRegister(t){this._observers=this._observers.filter(i=>i!==t)}notify(){this._observers.forEach(t=>{t.update(this._state)})}get observers(){return this._observers}set observers(t){this._observers=t}get state(){return this._state}set state(t){this._state=t}}},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const s=e(4);class o{constructor(t=new s.HitBox(0,0,0,0),i=0){this.level=i,this.maxObjects=10,this.maxLevels=5,this.hitBox=t,this.objects=[],this.nodes=[]}clear(){this.objects=[],this.nodes.forEach(t=>t.clear()),this.nodes=[]}getAllObjects(t){return this.nodes.forEach(i=>i.getAllObjects(t)),this.objects.forEach(i=>t.push(i)),t}findObjects(t,i){if(void 0===i)return void console.log("UNDEFINED OBJECT");let e=this.getIndex(i);return-1!==e&&this.nodes.length&&this.nodes[e].findObjects(t,i),this.objects.forEach(i=>t.push(i)),t}insert(t){if(void 0!==t)if(t instanceof Array)t.forEach(t=>this.insert(t));else{if(this.nodes.length>0){let i=this.getIndex(t);if(-1!==i)return void this.nodes[i].insert(t)}if(this.objects.push(t),this.objects.length>this.maxObjects&&this.level<this.maxLevels){void 0===this.nodes[0]&&this.split();let t=0;for(;t<this.objects.length;){let i=this.getIndex(this.objects[t]);-1!==i?this.nodes[i].insert(this.objects.splice(t,1)[0]):t++}}}}getIndex(t){let i=-1,e=this.hitBox.position.x+this.hitBox.width/2,s=this.hitBox.position.y+this.hitBox.height/2,o=t.position.y<s&&t.position.y+t.height<s,h=t.position.y>s;return t.position.x<e&&t.position.x+t.width<e?o?i=1:h&&(i=2):t.position.x>e&&(o?i=0:h&&(i=3)),i}split(){let t=this.hitBox.width/2|0,i=this.hitBox.height/2|0;this.nodes[0]=new o(new s.HitBox(this.hitBox.position.x+t,this.hitBox.position.y,t,i),this.level+1),this.nodes[1]=new o(new s.HitBox(this.hitBox.position.x,this.hitBox.position.y,t,i),this.level+1),this.nodes[2]=new o(new s.HitBox(this.hitBox.position.x,this.hitBox.position.y+i,t,i),this.level+1),this.nodes[3]=new o(new s.HitBox(this.hitBox.position.x+t,this.hitBox.position.y+i,t,i),this.level+1)}}i.QuadTree=o},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.CollisionManager=class{constructor(t){this.quadTree=t}detectCollision(){let t=[];this.quadTree.getAllObjects(t);for(let i=0;i<t.length;i++){let e=[];this.quadTree.findObjects(e,t[i]);for(let s=0;s<e.length;s++)t[i].isCollideAbleWith(e[s])&&Math.floor(t[i].position.x)<Math.floor(e[s].position.x)+e[s].width&&Math.floor(t[i].position.x)+t[i].width>Math.floor(e[s].position.x)&&Math.floor(t[i].position.y)<Math.floor(e[s].position.y)+e[s].height&&Math.floor(t[i].position.y)+t[i].height>Math.floor(e[s].position.y)&&(t[i].colliding=!0,e[s].colliding=!0)}}}},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const s=e(2);i.Settings=class{constructor(){this.keyBoard={w:s.Actions.UP,s:s.Actions.DOWN,a:s.Actions.LEFT,d:s.Actions.RIGHT,space:s.Actions.SHOOT,r:s.Actions.RESTART},this.player={maxVelocity:15,fireDelay:15,friction:.7,acceleration:3},this.audio={master:1,ambient:1,effects:1}}findKey(t){return Object.keys(this.keyBoard).filter(i=>this.keyBoard[i]===t)[0]}setKey(t,i){let e=this.findKey(i);t!==e&&(console.log("old:"+e," new: "+t+" value: "+i),this.keyBoard[t]=this.keyBoard[e],delete this.keyBoard[e])}}},,,,,,,,,,function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const s=e(22);document.addEventListener("DOMContentLoaded",()=>new s.Rpg)},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const s=e(9),o=e(23),h=e(10),n=e(24),a=e(25),r=e(2),l=e(11),c=e(3),d=e(27),u=e(1),p=e(4);i.Rpg=class{constructor(){this.canvas=document.getElementById("background"),this.canvasPlayer=document.getElementById("player"),this.assetManager=new c.AssetManager,this.settings=new l.Settings,this.inputManager=new r.InputManager(this.settings),this.init()}init(){this.assetManager.queueDownload(u.EntityType.MAP,"assets/tilesets/tileset.png",c.AssetType.SPRITE),this.assetManager.queueDownload(u.EntityType.PLAYER,"assets/sprites/player.png",c.AssetType.SPRITE),this.assetManager.queueDownload(u.EntityType.BACKGROUND,"assets/audio/amb_wilderness.mp3",c.AssetType.AUDIO),this.assetManager.downloadAll(()=>{let t=[[172,172,172,79,34,34,34,34,34,34,34,34,56,57,54,55,56,147,67,67,68,79,79,171,172,172,173,79,79,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55],[172,172,172,79,34,34,34,34,34,34,146,79,79,79,79,79,79,79,79,79,79,79,155,142,172,159,189,79,79,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55],[172,172,172,79,79,34,34,34,34,34,79,79,79,79,79,79,79,79,79,79,79,79,171,172,159,189,79,79,79,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55],[188,188,188,79,79,79,79,34,34,34,36,172,172,143,142,157,79,79,79,79,79,79,187,159,189,79,79,79,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55],[79,79,79,79,79,79,79,79,34,34,36,172,159,158,172,143,157,79,79,79,79,79,79,79,79,79,39,51,51,51,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55],[79,79,79,79,79,79,79,79,79,34,36,172,143,142,172,172,143,157,79,79,79,79,79,79,79,79,79,79,79,79,79,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55],[79,79,79,79,79,79,79,79,79,34,52,172,172,172,172,172,172,143,156,157,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[79,79,79,79,79,79,79,79,79,34,52,172,172,172,172,172,172,159,188,189,79,79,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[79,79,79,79,79,79,79,79,79,79,79,188,158,172,172,172,172,173,79,79,79,79,79,79,79,187,158,159,189,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[79,79,79,79,79,79,79,79,79,79,79,79,171,172,172,159,188,189,79,79,79,79,79,79,79,79,171,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[79,79,79,79,79,79,79,79,79,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,171,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[155,142,157,79,79,79,79,79,79,79,79,79,187,188,188,189,79,79,79,79,79,79,79,79,79,79,171,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[171,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,171,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[171,172,143,156,157,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,187,189,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[187,188,158,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[79,79,79,188,189,79,79,79,79,79,79,155,156,156,157,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,156,156,156,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,79,79,79,79,79,79,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,79,79,79,79,79,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,171,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,79,79,79,79,79,79,155,172,172,159,189,79,79,79,79,79,79,79,79,79,79,79,79,79,79,171,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,79,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79]];this.player=new o.Entity(350,370,this.assetManager.getSprite(u.EntityType.PLAYER),this.canvasPlayer.getContext("2d")),this.area=new n.Area(new d.TileSetMap(this.assetManager.getSprite(u.EntityType.MAP),[t,[[0,0,32,33,0,220,0,0,220,0,0,0,0,0,0,0,0,0,0,0,0,69,0,0,0,0,0,32,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,48,49,0,236,220,220,236,0,0,147,72,73,70,71,72,73,83,83,84,85,0,0,0,0,0,48,49,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,64,65,54,0,236,236,0,0,162,163,84,89,86,87,88,89,99,99,100,101,0,0,0,0,7,112,113,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,80,81,70,54,55,50,0,0,0,179,100,105,102,103,104,105,0,0,0,0,0,0,16,22,23,39,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,96,97,86,70,65,144,193,0,0,37,0,0,0,0,0,0,0,0,0,0,0,0,48,49,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,102,86,81,160,161,0,0,37,0,0,0,0,0,0,0,0,0,0,0,0,64,65,174,175,67,66,54,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,102,97,176,177,0,0,37,0,252,0,0,0,201,202,0,0,0,0,0,80,81,190,191,83,82,70,71,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,48,49,0,0,53,0,0,0,0,0,217,218,0,0,0,0,0,96,97,222,223,99,98,86,87,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[201,202,0,0,0,0,0,64,65,66,68,69,0,0,0,0,0,233,234,0,0,0,0,0,238,239,0,0,238,239,102,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[217,218,0,0,0,0,0,80,81,82,84,85,0,0,0,0,0,249,250,0,0,0,0,0,254,255,0,0,254,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[233,234,0,0,0,0,0,96,97,98,100,101,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[249,250,0,0,201,202,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,238,239,0,0,238,239,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,217,218,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,254,255,0,0,254,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,233,234,196,197,198,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,3,4,0,249,250,228,229,230,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[18,19,20,8,0,0,244,245,246,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,201,202,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,35,40,24,25,8,9,0,0,0,0,0,0,0,0,0,1,2,3,4,0,0,0,0,0,0,0,0,217,218,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,40,41,20,8,9,0,0,0,0,0,0,0,16,17,18,19,20,21,0,0,0,0,0,0,0,233,234,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,40,19,24,25,8,9,0,0,0,0,0,48,49,50,51,52,115,3,4,0,0,0,0,0,249,250,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,40,41,20,21,0,0,0,0,0,64,65,66,67,52,19,19,20,21,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]],this.canvas.getContext("2d"),32,t[0].length,t.length,16)),this.canvas.width=window.innerWidth>this.area.map.width?this.area.map.width:window.innerWidth,this.canvas.height=window.innerHeight>this.area.map.height?this.area.map.height:window.innerHeight,this.canvasPlayer.width=window.innerWidth>this.area.map.width?this.area.map.width:window.innerWidth,this.canvasPlayer.height=window.innerHeight>this.area.map.height?this.area.map.height:window.innerHeight,this.quadTree=new s.QuadTree(new p.HitBox(0,0,this.canvas.width,this.canvas.height)),this.collisionManager=new h.CollisionManager(this.quadTree),this.camera=new a.Camera(0,0,this.canvasPlayer.width,this.canvasPlayer.height,this.area.map.width,this.area.map.height),this.area.map.generate(),this.inputManager.register(this.player),this.camera.follow(this.player,this.canvas.width/2,this.canvas.height/2),this.assetManager.getSound(u.EntityType.BACKGROUND,c.AssetType.AUDIO_LOOP).play(!0),this.run()})}start(){}stop(){}update(){this.quadTree.clear(),this.quadTree.insert(this.player),this.quadTree.insert(this.area.map.hitBoxes),this.collisionManager.detectCollision(),this.camera.update(),this.player.move(this.area.map.width,this.area.map.height)}render(){this.player.draw(Math.floor(this.camera.position.x),Math.floor(this.camera.position.y),Math.floor(this.camera.previousPosition.x),Math.floor(this.camera.previousPosition.y)),this.area.map.draw(Math.floor(this.camera.position.x),Math.floor(this.camera.position.y))}run(){this.update(),this.render(),window.requestAnimationFrame(()=>this.run())}}},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const s=e(0),o=e(2),h=e(1);i.Entity=class{constructor(t,i,e,o){this.position=new s.Vector2(t,i),this.velocity=new s.Vector2(1,1),this.sprite=e,this.context=o,this.acceleration=new s.Vector2(0,0),this.state={},this.colliding=!1,this.type=h.EntityType.PLAYER,this.collidesWith=[],this.collidesWith.push(h.EntityType.BOX),this.width=e.width,this.height=e.height,this.previousPosition=new s.Vector2(t,i)}move(t,i){this.colliding?this.goBack():(this.previousPosition.setVector(this.position),this.acceleration.set(0,0),this.state[o.Actions.LEFT]&&this.acceleration.add(-3,0),this.state[o.Actions.RIGHT]&&this.acceleration.add(3,0),this.state[o.Actions.UP]&&this.acceleration.add(0,-3),this.state[o.Actions.DOWN]&&this.acceleration.add(0,3),this.velocity.multiply(.6),this.velocity.addVector(this.acceleration),this.velocity.limit(15),this.position.addVector(this.velocity),this.position.x-this.width/2<0&&(this.position.x=this.width/2),this.position.y-this.height/2<0&&(this.position.y=this.height/2),this.position.x+this.width/2>t&&(this.position.x=t-this.width/2),this.position.y+this.height/2>i&&(this.position.y=i-this.height/2))}draw(t,i,e,s){this.context.clearRect(Math.floor(this.previousPosition.x)-this.width/2-e,Math.floor(this.previousPosition.y)-this.height/2-s,this.width,this.height),this.context.drawImage(this.sprite,Math.floor(this.position.x)-this.width/2-t,Math.floor(this.position.y)-this.height/2-i,this.width,this.height)}goBack(){let t=this.position.clone();this.position.setVector(this.previousPosition),this.previousPosition.setVector(t),this.colliding=!1}update(t){this.state=t}isCollideAbleWith(t){return this.collidesWith.includes(t.type.toString())}}},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.Area=class{constructor(t){this.map=t}}},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const s=e(0),o=e(26);var h;(n=h=i.AXIS||(i.AXIS={})).NONE="none",n.HORIZONTAL="horizontal",n.VERTICAL="vertical",n.BOTH="both";var n;i.Camera=class{constructor(t,i,e,n,a,r){this.position=new s.Vector2(t,i),this.previousPosition=new s.Vector2(t,i),this.deadZone=new s.Vector2(0,0),this.viewWidth=e,this.viewHeight=n,this.axis=h.BOTH,this.following=null,this.viewportRect=new o.Rectangle(this.position.x,this.position.y,this.viewWidth,this.viewHeight),this.worldRect=new o.Rectangle(0,0,a,r)}follow(t,i,e){this.following=t,this.deadZone.set(i,e)}update(){this.previousPosition.setVector(this.position),null!=this.following&&(this.axis!==h.HORIZONTAL&&this.axis!==h.BOTH||(this.following.position.x-this.position.x+this.deadZone.x>this.viewWidth?this.position.x=this.following.position.x-(this.viewWidth-this.deadZone.x):this.following.position.x-this.deadZone.x<this.position.x&&(this.position.x=this.following.position.x-this.deadZone.x)),this.axis!==h.VERTICAL&&this.axis!==h.BOTH||(this.following.position.y-this.position.y+this.deadZone.y>this.viewHeight?this.position.y=this.following.position.y-(this.viewHeight-this.deadZone.y):this.following.position.y-this.deadZone.y<this.position.y&&(this.position.y=this.following.position.y-this.deadZone.y))),this.viewportRect.set(this.position.x,this.position.y),this.viewportRect.within(this.worldRect)||(this.viewportRect.left<this.worldRect.left&&(this.position.x=this.worldRect.left),this.viewportRect.top<this.worldRect.top&&(this.position.y=this.worldRect.top),this.viewportRect.right>this.worldRect.right&&(this.position.x=this.worldRect.right-this.viewWidth),this.viewportRect.bottom>this.worldRect.bottom&&(this.position.y=this.worldRect.bottom-this.viewHeight))}}},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.Rectangle=class{constructor(t,i,e,s){this.left=t,this.top=i,this.width=e,this.height=s,this.right=this.left+this.width,this.bottom=this.top+this.height}set(t,i,e,s){this.left=t,this.top=i,this.width=e||this.width,this.height=s||this.height,this.right=this.left+this.width,this.bottom=this.top+this.height}within(t){return t.left<=this.left&&t.right>=this.right&&t.top<=this.top&&t.bottom>=this.bottom}overlaps(t){return this.left<t.right&&t.left<this.right&&this.top<t.bottom&&t.top<this.bottom}}},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const s=e(4);i.TileSetMap=class{constructor(t,i,e,s,o,h,n){this.tileSetImage=t,this.width=o*s,this.height=h*s,this.mapLayers=i,this.context=e,this.tileSize=s,this.tilesPerRow=o,this.tilesPerColumn=h,this.imageTilesPerRow=n,this.hitBoxes=[],console.log(this.width),console.log(this.height)}generate(){let t=document.createElement("canvas").getContext("2d");t.canvas.width=this.width,t.canvas.height=this.height,this.mapLayers.forEach(i=>this.generateLayer(t,i)),this.image=new Image,this.image.src=t.canvas.toDataURL("image/png"),t=null}generateLayer(t,i){for(let e=0;e<this.tilesPerColumn;e++)for(let o=0;o<this.tilesPerRow;o++){let h=i[e][o];0!==h&&this.mapLayers.indexOf(i)===this.mapLayers.length-1&&this.hitBoxes.push(new s.HitBox(o*this.tileSize,e*this.tileSize,this.tileSize,this.tileSize));let n=h/this.imageTilesPerRow|0,a=h%this.imageTilesPerRow|0;t.drawImage(this.tileSetImage,a*this.tileSize,n*this.tileSize,this.tileSize,this.tileSize,o*this.tileSize,e*this.tileSize,this.tileSize,this.tileSize)}}draw(t,i){this.context.drawImage(this.image,0,0,this.image.width,this.image.height,-t,-i,this.image.width,this.image.height)}}}]);
//# sourceMappingURL=tileSetMap.min.js.map