!function(t){var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=26)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});(s=e.EntityType||(e.EntityType={})).PLAYER="ship",s.ENEMY="enemy",s.ENEMY_BULLET="bulletEnemy",s.PLAYER_BULLET="bullet",s.BACKGROUND="background",s.MAP="map",s.GAME_OVER="gameOver",s.LASER="laser",s.MAIN_THEME="shockWave",s.EXPLOSION_I="explosion1",s.EXPLOSION_II="explosion2",s.BOX="box",s.ARENA="arena";var s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(5);(o=e.Actions||(e.Actions={})).UP="UP",o.DOWN="DOWN",o.LEFT="LEFT",o.RIGHT="RIGHT",o.SHOOT="SHOOT",o.RESTART="RESTART",o.ROTATE_LEFT="R-LEFT",o.ROTATE_RIGHT="R-RIGHT";var o;e.default=class extends s.default{constructor(t){super(),this.inputMap=t.keyBoard,this.init(),this.initializeTouchHandler(),this.touches={start:[],move:[]}}init(){window.addEventListener("keydown",t=>{let e=" "!==t.key?t.key:"space";this.state[this.inputMap[e]]=!0,this.notify()}),window.addEventListener("keyup",t=>{let e=" "!==t.key?t.key:"space";this.state[this.inputMap[e]]=!1,this.notify()})}initializeTouchHandler(){let t=document.getElementById("move"),e=t||window;e.addEventListener("touchstart",l,!1),e.addEventListener("touchmove",d,!1),e.addEventListener("touchend",c,!1),e.addEventListener("contextmenu",t=>(t.preventDefault(),!1));let i=[],s=[],o=0,h=0,a=0,n=0,r=this;function l(t){t.preventDefault(),i=t.touches,o=t.touches[0].pageX,h=t.touches[0].pageY}function d(t){r.reset(),t.preventDefault(),s=t.changedTouches,a=t.touches[0].pageX,n=t.touches[0].pageY;for(let e=0;e<t.touches.length;e++)s[e].pageX<i[e].pageX&&(r.state[r.inputMap.a]=!0),s[e].pageX>i[e].pageX&&(r.state[r.inputMap.d]=!0),s[e].pageY<i[e].pageY&&(r.state[r.inputMap.w]=!0),s[e].pageY>i[e].pageY&&(r.state[r.inputMap.s]=!0),r.notify()}function c(t){t.preventDefault(),r.reset()}}shoot(){this.state[this.inputMap.space]=!0}cancelShoot(){this.state[this.inputMap.space]=!1}reset(){this.state[this.inputMap.w]=!1,this.state[this.inputMap.a]=!1,this.state[this.inputMap.s]=!1,this.state[this.inputMap.d]=!1}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(t,e){this.x=t,this.y=e}static addVector(t,e){return new s(t.x+e.x,t.y+e.y)}static subtractVector(t,e){return new s(t.x-e.x,t.y-e.y)}static multiply(t,e){return new s(t.x*e,t.y*e)}static divide(t,e){if(0===e)throw new Error('cannot divide vector by scalar with value "0"');return new s(t.x/e,t.y/e)}set x(t){this._x=t}set y(t){this._y=t}get x(){return this._x}get y(){return this._y}set(t,e){this.x=t,this.y=e}setVector(t){this.x=t.x,this.y=t.y}add(t,e){this.x+=t,this.y+=e}addVector(t){this.x+=t.x,this.y+=t.y}subtract(t,e){this.x-=t,this.y-=e}subtractVector(t){this.x-=t.x,this.y-=t.y}multiply(t){this.x*=t,this.y*=t}divide(t){if(0===t)throw new Error('cannot divide vector by "0"');this.x/=t,this.y/=t}mag(){return Math.sqrt(this.x*this.x+this.y*this.y)}negative(){return new s(-this.x,-this.y)}normalize(){let t=this.mag();0!==t&&this.divide(t)}limit(t){Math.floor(this.mag())>t&&(this.normalize(),this.multiply(t))}distanceTo(t){return Math.sqrt(Math.pow(t.x-this.x,2)+Math.pow(t.y-this.y,2))}dot(t){return this.x*t.x+this.y*t.y}floor(){this.x=Math.floor(this.x),this.x=Math.floor(this.x)}clone(){return new s(this.x,this.y)}}e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(9),o=i(10),h=i(11);var a;(n=a=e.AssetType||(e.AssetType={})).SPRITE="SPRITE",n.SPRITE_SHEET="SPRITE_SHEET",n.AUDIO="AUDIO",n.AUDIO_LOOP="LOOP";var n;e.default=class{constructor(){this.cache={sprites:{},spriteSheets:{},audio:{}},this.downloadCount=0,this.queue=[],this.initAudioContext()}initAudioContext(){try{window.AudioContext=window.AudioContext||webkitAudioContext,this.audioContext=new AudioContext,this.masterGain=this.audioContext.createGain(),this.effectsGain=this.audioContext.createGain(),this.ambientGain=this.audioContext.createGain(),this.masterGain.gain.value=1,this.masterGain.connect(this.audioContext.destination),this.effectsGain.connect(this.masterGain),this.ambientGain.connect(this.masterGain),this.ambientGain.gain.value=1,this.effectsGain.gain.value=1}catch(t){console.log("Web Audio API is not supported in this browser")}}adjustMasterVolume(t){this.masterGain.gain.value=t}adjustAmbientVolume(t){this.ambientGain.gain.value=t}adjustEffectsVolume(t){this.effectsGain.gain.value=t}done(){return this.downloadCount===this.queue.length}queueDownload(t,e,i,s=null){this.queue.push({id:t,path:e,type:i,opts:s})}loadAudioFromUrl(t,e){h.default.create({method:"GET",url:t.path,responseType:"arraybuffer"},i=>{this.decodeAudio(i,t.id,e)})}decodeAudio(t,e,i){this.audioContext.decodeAudioData(t).then(t=>{this.cache.audio[e]=t,this.downloadCount+=1,this.done()&&i()},t=>{console.log("Error with decoding audio data"+t)})}loadSprite(t,e){let i=new Image;i.addEventListener("load",()=>{this.downloadCount++,this.done()&&e()}),i.src=t.path,this.cache.sprites[t.id]=i}loadSpriteSheet(t,e){let i=new Image;i.addEventListener("load",()=>{this.cache.spriteSheets[t.id]=new s.default(i,t.opts.frameWidth||0,t.opts.frameHeight||0),this.downloadCount+=1,this.done()&&e()}),i.src=t.path}downloadAll(t){this.queue.forEach(e=>{e.type===a.AUDIO?this.loadAudioFromUrl(e,t):e.type===a.SPRITE?this.loadSprite(e,t):e.type===a.SPRITE_SHEET&&this.loadSpriteSheet(e,t)})}getSound(t,e){let i;return i=e===a.AUDIO?this.effectsGain:this.ambientGain,new o.default(this.audioContext,i,this.cache.audio[t])}getSprite(t){return this.cache.sprites[t]}getSpriteSheet(t){return this.cache.spriteSheets[t]}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(2),o=i(0);e.default=class{constructor(t,e,i,h){this.position=new s.default(t,e),this.width=i,this.height=h,this.colliding=!1,this.collidesWith=[],this.type=o.EntityType.BOX,this.collidesWith.push(o.EntityType.PLAYER)}isCollideAbleWith(t){return this.collidesWith.includes(t.type.toString())}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(){this._observers=[],this._state={}}register(t){this._observers.push(t)}unRegister(t){this._observers=this._observers.filter(e=>e!==t)}notify(){this._observers.forEach(t=>{t.update(this._state)})}get observers(){return this._observers}set observers(t){this._observers=t}get state(){return this._state}set state(t){this._state=t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(1);e.default=class{constructor(){this.keyBoard={w:s.Actions.UP,s:s.Actions.DOWN,a:s.Actions.LEFT,d:s.Actions.RIGHT,space:s.Actions.SHOOT,r:s.Actions.RESTART,q:s.Actions.ROTATE_LEFT,e:s.Actions.ROTATE_RIGHT},this.player={maxVelocity:15,fireDelay:15,friction:.7,acceleration:3},this.audio={master:1,ambient:1,effects:1}}findKey(t){return Object.keys(this.keyBoard).filter(e=>this.keyBoard[e]===t)[0]}setKey(t,e){let i=this.findKey(e);t!==i&&(console.log("old:"+i," new: "+t+" value: "+e),this.keyBoard[t]=this.keyBoard[i],delete this.keyBoard[i])}}},,,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e,i){this._image=t,this._frameWidth=e,this._frameHeight=i,this._framesPerRow=Math.floor(this._image.width/this._frameWidth)}get image(){return this._image}set image(t){if(!(t instanceof Image))throw new Error("Param tileSetImage must be of type Image!");this._image=t}get frameWidth(){return this._frameWidth}set frameWidth(t){this._frameWidth=t}get frameHeight(){return this._frameHeight}set frameHeight(t){this._frameHeight=t}get framesPerRow(){return this._framesPerRow}set framesPerRow(t){this._framesPerRow=t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e,i){this.audioContext=t,this.masterGain=e,this.buffer=i,this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=.2,this.gainNode.connect(this.masterGain),this.playing=!1}play(t=!1){this.source=this.audioContext.createBufferSource(),this.source.buffer=this.buffer,this.source.loop=t,this.source.connect(this.gainNode),this.source.start(0)}stop(){this.source.stop(0)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{static create(t,e){let i=new XMLHttpRequest;i.addEventListener("load",()=>{e(i.response)}),i.open(t.method?t.method:s.defaults.method,t.url?t.url:s.defaults.url,t.async?t.async:s.defaults.async),t.hasOwnProperty("contentType")&&i.setRequestHeader("Content-Type",t.contentType?t.contentType:s.defaults.contentType),t.hasOwnProperty("responseType")&&(i.responseType=t.responseType),t.hasOwnProperty("data")&&"object"==typeof t.data&&(t.data=JSON.stringify(t.data)),i.send(t.data?t.data:null)}}s.defaults={url:"",method:"GET",contentType:"text/html",async:!0,data:null},e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(4);class o{constructor(t=new s.default(0,0,0,0),e=0){this.level=e,this.maxObjects=10,this.maxLevels=5,this.hitBox=t,this.objects=[],this.nodes=[]}clear(){this.objects=[],this.nodes.forEach(t=>t.clear()),this.nodes=[]}getAllObjects(t){return this.nodes.forEach(e=>e.getAllObjects(t)),this.objects.forEach(e=>t.push(e)),t}findObjects(t,e){if(void 0===e)return void console.log("UNDEFINED OBJECT");let i=this.getIndex(e);return-1!==i&&this.nodes.length&&this.nodes[i].findObjects(t,e),this.objects.forEach(e=>t.push(e)),t}insert(t){if(void 0!==t)if(t instanceof Array)t.forEach(t=>this.insert(t));else{if(this.nodes.length>0){let e=this.getIndex(t);if(-1!==e)return void this.nodes[e].insert(t)}if(this.objects.push(t),this.objects.length>this.maxObjects&&this.level<this.maxLevels){void 0===this.nodes[0]&&this.split();let t=0;for(;t<this.objects.length;){let e=this.getIndex(this.objects[t]);-1!==e?this.nodes[e].insert(this.objects.splice(t,1)[0]):t++}}}}getIndex(t){let e=-1,i=this.hitBox.position.x+this.hitBox.width/2,s=this.hitBox.position.y+this.hitBox.height/2,o=t.position.y<s&&t.position.y+t.height<s,h=t.position.y>s;return t.position.x<i&&t.position.x+t.width<i?o?e=1:h&&(e=2):t.position.x>i&&(o?e=0:h&&(e=3)),e}split(){let t=this.hitBox.width/2|0,e=this.hitBox.height/2|0;this.nodes[0]=new o(new s.default(this.hitBox.position.x+t,this.hitBox.position.y,t,e),this.level+1),this.nodes[1]=new o(new s.default(this.hitBox.position.x,this.hitBox.position.y,t,e),this.level+1),this.nodes[2]=new o(new s.default(this.hitBox.position.x,this.hitBox.position.y+e,t,e),this.level+1),this.nodes[3]=new o(new s.default(this.hitBox.position.x+t,this.hitBox.position.y+e,t,e),this.level+1)}}e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t){this.quadTree=t}detectCollision(){let t=[];this.quadTree.getAllObjects(t);for(let e=0;e<t.length;e++){let i=[];this.quadTree.findObjects(i,t[e]);for(let s=0;s<i.length;s++)t[e].isCollideAbleWith(i[s])&&Math.floor(t[e].position.x)<Math.floor(i[s].position.x)+i[s].width&&Math.floor(t[e].position.x)+t[e].width>Math.floor(i[s].position.x)&&Math.floor(t[e].position.y)<Math.floor(i[s].position.y)+i[s].height&&Math.floor(t[e].position.y)+t[e].height>Math.floor(i[s].position.y)&&(t[e].colliding=!0,i[s].colliding=!0)}}}},,,,,,,,,,,,,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(27);document.addEventListener("DOMContentLoaded",()=>new s.default)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(12),o=i(28),h=i(13),a=i(29),n=i(30),r=i(1),l=i(6),d=i(3),c=i(32),u=i(0),p=i(4);e.default=class{constructor(){this.canvas=document.getElementById("background"),this.canvasPlayer=document.getElementById("player"),this.assetManager=new d.default,this.settings=new l.default,this.inputManager=new r.default(this.settings),this.init()}init(){this.assetManager.queueDownload(u.EntityType.MAP,"assets/tilesets/tileset.png",d.AssetType.SPRITE),this.assetManager.queueDownload(u.EntityType.PLAYER,"assets/sprites/player.png",d.AssetType.SPRITE),this.assetManager.queueDownload(u.EntityType.BACKGROUND,"assets/audio/amb_wilderness.mp3",d.AssetType.AUDIO),this.assetManager.downloadAll(()=>{let t=[[172,172,172,79,34,34,34,34,34,34,34,34,56,57,54,55,56,147,67,67,68,79,79,171,172,172,173,79,79,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55],[172,172,172,79,34,34,34,34,34,34,146,79,79,79,79,79,79,79,79,79,79,79,155,142,172,159,189,79,79,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55],[172,172,172,79,79,34,34,34,34,34,79,79,79,79,79,79,79,79,79,79,79,79,171,172,159,189,79,79,79,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55],[188,188,188,79,79,79,79,34,34,34,36,172,172,143,142,157,79,79,79,79,79,79,187,159,189,79,79,79,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55],[79,79,79,79,79,79,79,79,34,34,36,172,159,158,172,143,157,79,79,79,79,79,79,79,79,79,39,51,51,51,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55],[79,79,79,79,79,79,79,79,79,34,36,172,143,142,172,172,143,157,79,79,79,79,79,79,79,79,79,79,79,79,79,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55],[79,79,79,79,79,79,79,79,79,34,52,172,172,172,172,172,172,143,156,157,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[79,79,79,79,79,79,79,79,79,34,52,172,172,172,172,172,172,159,188,189,79,79,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[79,79,79,79,79,79,79,79,79,79,79,188,158,172,172,172,172,173,79,79,79,79,79,79,79,187,158,159,189,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[79,79,79,79,79,79,79,79,79,79,79,79,171,172,172,159,188,189,79,79,79,79,79,79,79,79,171,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[79,79,79,79,79,79,79,79,79,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,171,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[155,142,157,79,79,79,79,79,79,79,79,79,187,188,188,189,79,79,79,79,79,79,79,79,79,79,171,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[171,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,171,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[171,172,143,156,157,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,187,189,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[187,188,158,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[79,79,79,188,189,79,79,79,79,79,79,155,156,156,157,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,156,156,156,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,79,79,79,79,79,79,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,79,79,79,79,79,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,171,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,79,79,79,79,79,79,155,172,172,159,189,79,79,79,79,79,79,79,79,79,79,79,79,79,79,171,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,79,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79],[34,34,34,34,34,34,34,79,79,79,171,172,172,173,79,79,79,79,79,79,79,79,79,79,79,79,79,79,155,142,172,172,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79]];this.player=new o.default(350,370,this.assetManager.getSprite(u.EntityType.PLAYER),this.canvasPlayer.getContext("2d")),this.area=new a.default(new c.default(this.assetManager.getSprite(u.EntityType.MAP),[t,[[0,0,32,33,0,220,0,0,220,0,0,0,0,0,0,0,0,0,0,0,0,69,0,0,0,0,0,32,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,48,49,0,236,220,220,236,0,0,147,72,73,70,71,72,73,83,83,84,85,0,0,0,0,0,48,49,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,64,65,54,0,236,236,0,0,162,163,84,89,86,87,88,89,99,99,100,101,0,0,0,0,7,112,113,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,80,81,70,54,55,50,0,0,0,179,100,105,102,103,104,105,0,0,0,0,0,0,16,22,23,39,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,96,97,86,70,65,144,193,0,0,37,0,0,0,0,0,0,0,0,0,0,0,0,48,49,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,102,86,81,160,161,0,0,37,0,0,0,0,0,0,0,0,0,0,0,0,64,65,174,175,67,66,54,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,102,97,176,177,0,0,37,0,252,0,0,0,201,202,0,0,0,0,0,80,81,190,191,83,82,70,71,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,48,49,0,0,53,0,0,0,0,0,217,218,0,0,0,0,0,96,97,222,223,99,98,86,87,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[201,202,0,0,0,0,0,64,65,66,68,69,0,0,0,0,0,233,234,0,0,0,0,0,238,239,0,0,238,239,102,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[217,218,0,0,0,0,0,80,81,82,84,85,0,0,0,0,0,249,250,0,0,0,0,0,254,255,0,0,254,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[233,234,0,0,0,0,0,96,97,98,100,101,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[249,250,0,0,201,202,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,238,239,0,0,238,239,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,217,218,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,254,255,0,0,254,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,233,234,196,197,198,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,3,4,0,249,250,228,229,230,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[18,19,20,8,0,0,244,245,246,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,201,202,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,35,40,24,25,8,9,0,0,0,0,0,0,0,0,0,1,2,3,4,0,0,0,0,0,0,0,0,217,218,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,40,41,20,8,9,0,0,0,0,0,0,0,16,17,18,19,20,21,0,0,0,0,0,0,0,233,234,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,40,19,24,25,8,9,0,0,0,0,0,48,49,50,51,52,115,3,4,0,0,0,0,0,249,250,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,40,41,20,21,0,0,0,0,0,64,65,66,67,52,19,19,20,21,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]],this.canvas.getContext("2d"),32,t[0].length,t.length,16)),this.canvas.width=window.innerWidth>this.area.map.width?this.area.map.width:window.innerWidth,this.canvas.height=window.innerHeight>this.area.map.height?this.area.map.height:window.innerHeight,this.canvasPlayer.width=window.innerWidth>this.area.map.width?this.area.map.width:window.innerWidth,this.canvasPlayer.height=window.innerHeight>this.area.map.height?this.area.map.height:window.innerHeight,this.quadTree=new s.default(new p.default(0,0,this.canvas.width,this.canvas.height)),this.collisionManager=new h.default(this.quadTree),this.camera=new n.default(0,0,this.canvasPlayer.width,this.canvasPlayer.height,this.area.map.width,this.area.map.height),this.area.map.generate(),this.inputManager.register(this.player),this.camera.follow(this.player,this.canvas.width/2,this.canvas.height/2),this.assetManager.getSound(u.EntityType.BACKGROUND,d.AssetType.AUDIO_LOOP).play(!0),this.run()})}start(){}animationCallback(t){}stop(){}update(){this.quadTree.clear(),this.quadTree.insert(this.player),this.quadTree.insert(this.area.map.hitBoxes),this.collisionManager.detectCollision(),this.camera.update(),this.player.move(this.area.map.width,this.area.map.height)}render(){this.player.draw(Math.floor(this.camera.position.x),Math.floor(this.camera.position.y),Math.floor(this.camera.previousPosition.x),Math.floor(this.camera.previousPosition.y)),this.area.map.draw(Math.floor(this.camera.position.x),Math.floor(this.camera.position.y))}run(){this.update(),this.render(),window.requestAnimationFrame(()=>this.run())}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(2),o=i(1),h=i(0);e.default=class{constructor(t,e,i,o){this.position=new s.default(t,e),this.velocity=new s.default(1,1),this.sprite=i,this.context=o,this.acceleration=new s.default(0,0),this.state={},this.colliding=!1,this.type=h.EntityType.PLAYER,this.collidesWith=[],this.collidesWith.push(h.EntityType.BOX),this.width=i.width,this.height=i.height,this.previousPosition=new s.default(t,e)}move(t,e){this.colliding?this.goBack():(this.previousPosition.setVector(this.position),this.acceleration.set(0,0),this.state[o.Actions.LEFT]&&this.acceleration.add(-3,0),this.state[o.Actions.RIGHT]&&this.acceleration.add(3,0),this.state[o.Actions.UP]&&this.acceleration.add(0,-3),this.state[o.Actions.DOWN]&&this.acceleration.add(0,3),this.velocity.multiply(.6),this.velocity.addVector(this.acceleration),this.velocity.limit(15),this.position.addVector(this.velocity),this.position.x-this.width/2<0&&(this.position.x=this.width/2),this.position.y-this.height/2<0&&(this.position.y=this.height/2),this.position.x+this.width/2>t&&(this.position.x=t-this.width/2),this.position.y+this.height/2>e&&(this.position.y=e-this.height/2))}draw(t,e,i,s){this.context.clearRect(Math.floor(this.previousPosition.x)-this.width/2-i,Math.floor(this.previousPosition.y)-this.height/2-s,this.width,this.height),this.context.drawImage(this.sprite,Math.floor(this.position.x)-this.width/2-t,Math.floor(this.position.y)-this.height/2-e,this.width,this.height)}goBack(){let t=this.position.clone();this.position.setVector(this.previousPosition),this.previousPosition.setVector(t),this.colliding=!1}update(t){this.state=t}isCollideAbleWith(t){return this.collidesWith.includes(t.type.toString())}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t){this.map=t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(2),o=i(31);var h;(a=h=e.AXIS||(e.AXIS={})).NONE="none",a.HORIZONTAL="horizontal",a.VERTICAL="vertical",a.BOTH="both";var a;e.default=class{constructor(t,e,i,a,n,r){this.position=new s.default(t,e),this.previousPosition=new s.default(t,e),this.deadZone=new s.default(0,0),this.viewWidth=i,this.viewHeight=a,this.axis=h.BOTH,this.following=null,this.viewportRect=new o.default(this.position.x,this.position.y,this.viewWidth,this.viewHeight),this.worldRect=new o.default(0,0,n,r)}follow(t,e,i){this.following=t,this.deadZone.set(e,i)}update(){this.previousPosition.setVector(this.position),null!=this.following&&(this.axis!==h.HORIZONTAL&&this.axis!==h.BOTH||(this.following.position.x-this.position.x+this.deadZone.x>this.viewWidth?this.position.x=this.following.position.x-(this.viewWidth-this.deadZone.x):this.following.position.x-this.deadZone.x<this.position.x&&(this.position.x=this.following.position.x-this.deadZone.x)),this.axis!==h.VERTICAL&&this.axis!==h.BOTH||(this.following.position.y-this.position.y+this.deadZone.y>this.viewHeight?this.position.y=this.following.position.y-(this.viewHeight-this.deadZone.y):this.following.position.y-this.deadZone.y<this.position.y&&(this.position.y=this.following.position.y-this.deadZone.y))),this.viewportRect.set(this.position.x,this.position.y),this.viewportRect.within(this.worldRect)||(this.viewportRect.left<this.worldRect.left&&(this.position.x=this.worldRect.left),this.viewportRect.top<this.worldRect.top&&(this.position.y=this.worldRect.top),this.viewportRect.right>this.worldRect.right&&(this.position.x=this.worldRect.right-this.viewWidth),this.viewportRect.bottom>this.worldRect.bottom&&(this.position.y=this.worldRect.bottom-this.viewHeight))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e,i,s){this.left=t,this.top=e,this.width=i,this.height=s,this.right=this.left+this.width,this.bottom=this.top+this.height}set(t,e,i,s){this.left=t,this.top=e,this.width=i||this.width,this.height=s||this.height,this.right=this.left+this.width,this.bottom=this.top+this.height}within(t){return t.left<=this.left&&t.right>=this.right&&t.top<=this.top&&t.bottom>=this.bottom}overlaps(t){return this.left<t.right&&t.left<this.right&&this.top<t.bottom&&t.top<this.bottom}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(4);e.default=class{constructor(t,e,i,s,o,h,a){this.tileSetImage=t,this.width=o*s,this.height=h*s,this.mapLayers=e,this.context=i,this.tileSize=s,this.tilesPerRow=o,this.tilesPerColumn=h,this.imageTilesPerRow=a,this.hitBoxes=[],console.log(this.width),console.log(this.height)}generate(){let t=document.createElement("canvas").getContext("2d");t.canvas.width=this.width,t.canvas.height=this.height,this.mapLayers.forEach(e=>this.generateLayer(t,e)),this.image=new Image,this.image.src=t.canvas.toDataURL("image/png"),t=null}generateLayer(t,e){for(let i=0;i<this.tilesPerColumn;i++)for(let o=0;o<this.tilesPerRow;o++){let h=e[i][o];0!==h&&this.mapLayers.indexOf(e)===this.mapLayers.length-1&&this.hitBoxes.push(new s.default(o*this.tileSize,i*this.tileSize,this.tileSize,this.tileSize));let a=h/this.imageTilesPerRow|0,n=h%this.imageTilesPerRow|0;t.drawImage(this.tileSetImage,n*this.tileSize,a*this.tileSize,this.tileSize,this.tileSize,o*this.tileSize,i*this.tileSize,this.tileSize,this.tileSize)}}draw(t,e){this.context.drawImage(this.image,0,0,this.image.width,this.image.height,-t,-e,this.image.width,this.image.height)}}}]);
//# sourceMappingURL=tileSetMap.min.js.map